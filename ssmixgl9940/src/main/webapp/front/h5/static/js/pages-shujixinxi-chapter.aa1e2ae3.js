(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shujixinxi-chapter"],{2168:function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{style:{background:""+t.background},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchEnd.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"title",style:{color:""+t.color}},[t._v(t._s(t.detail.chaptertitle))]),n("v-uni-view",{staticClass:"operateView",style:{margin:"40rpx auto 0",alignItems:"center",background:"none",display:"flex",width:"calc(100% - 48rpx)",fontSize:"30rpx",justifyContent:"center",order:"2"}},[t.likeType?t._e():n("v-uni-view",{style:{padding:"20rpx 40rpx",margin:"0 20rpx 0 0",color:"#666",borderRadius:"20rpx",textAlign:"center",background:"#999",width:"auto"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.likeClick.apply(void 0,arguments)}}},[n("span",{staticClass:"icon iconfont icon-zan10",style:{color:"#fff"}}),n("span",{style:{color:"#fff"}},[t._v("赞("+t._s(t.allZan)+")")])]),t.likeType?n("v-uni-view",{style:{width:"auto",padding:"20rpx 40rpx",margin:"0 20rpx 0 0",color:"#fff",borderRadius:"20rpx",background:"#ccc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.likeClick.apply(void 0,arguments)}}},[n("span",{staticClass:"icon iconfont icon-zan10",style:{color:"#fff"}}),n("span",{style:{color:"#fff"}},[t._v("取消赞("+t._s(t.allZan)+")")])]):t._e(),t.collectType?t._e():n("v-uni-view",{style:{width:"auto",padding:"20rpx 40rpx",color:"#666",borderRadius:"20rpx",textAlign:"center",background:"#999"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.collectClick.apply(void 0,arguments)}}},[n("span",{staticClass:"icon iconfont icon-shoucang10",style:{color:"#fff"}}),n("span",{style:{color:"#fff"}},[t._v("收藏("+t._s(t.allCollect)+")")])]),t.collectType?n("v-uni-view",{style:{width:"auto",padding:"20rpx 40rpx",color:"#fff",borderRadius:"20rpx",background:"#ccc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.collectClick.apply(void 0,arguments)}}},[n("span",{staticClass:"icon iconfont icon-shoucang10",style:{color:"#fff"}}),n("span",{style:{color:"#fff"}},[t._v("取消收藏("+t._s(t.allCollect)+")")])]):t._e()],1),n("v-uni-view",{staticClass:"content"},[n("v-uni-rich-text",{style:{color:""+t.color,"font-size":t.fontSize+"px"},attrs:{nodes:t.detail.content}})],1),n("v-uni-view",{staticClass:"btn",style:{background:""+t.background}},[n("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.prepClick.apply(void 0,arguments)}}},[t._v("上一章")]),n("v-uni-button",{attrs:{type:"warn",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backClick.apply(void 0,arguments)}}},[t._v("目录")]),n("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.nextClick.apply(void 0,arguments)}}},[t._v("下一章")]),n("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showType=!t.showType}}},[t._v("操作")]),t.showType?n("v-uni-view",{staticStyle:{position:"absolute",padding:"10rpx 0",top:"-40px",left:"5%",width:"90%",display:"flex","align-items":"center"},style:{background:""+t.background}},[n("v-uni-button",{attrs:{type:"#fff"==t.background?"warn":"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.blackClick.apply(void 0,arguments)}}},[t._v(t._s("#fff"==t.background?"暗黑":"光亮"))]),n("v-uni-button",{staticStyle:{margin:"0 5px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jiaClick.apply(void 0,arguments)}}},[t._v("字体+")]),n("v-uni-button",{attrs:{type:"warn",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.jianClick.apply(void 0,arguments)}}},[t._v("字体-")]),n("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addbookmark.apply(void 0,arguments)}}},[t._v("加入书签")])],1):t._e()],1)],1)},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},3482:function(t,e,n){"use strict";var i=n("7e3c"),r=n.n(i);r.a},"6f25":function(t,e,n){"use strict";n.r(e);var i=n("a620"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},"7e3c":function(t,e,n){var i=n("80b2");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("19fec246",i,!0,{sourceMap:!1,shadowMode:!1})},"80b2":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-a1bdf57a]{background:#fff}.title[data-v-a1bdf57a]{text-align:center;font-size:%?40?%;font-weight:700;padding:%?20?%}.content[data-v-a1bdf57a]{margin:%?40?% %?40?% %?100?%;font-size:%?30?%;line-height:%?50?%;letter-spacing:%?5?%;padding-bottom:%?80?%}.btn[data-v-a1bdf57a]{background:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:fixed;bottom:0;width:100%;left:0;padding:%?10?% 0;box-shadow:0 -2px 10px 0 rgba(0,0,0,.1)}.btn uni-button[data-v-a1bdf57a]{font-size:%?26?%}body.?%PAGE?%[data-v-a1bdf57a]{background:#fff}',""]),t.exports=e},a620:function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a481"),n("c5f6"),n("96cf");var r=i(n("3b8d")),a={data:function(){return{detail:{},id:"",refid:"",list:[],user:{},background:"#fff",color:"#000",fontSize:16,showType:!1,likeType:!1,likeForm:{},allZan:0,collectType:!1,collectForm:{},allCollect:0,progress:0}},onLoad:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.id=e.id,this.refid=e.refid,this.init(),this.getList(),this.user=JSON.parse(uni.getStorageSync("userSession")),uni.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff",animation:{duration:400,timingFunc:"easeIn"}});case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onPageScroll:function(t){this.progress=t.scrollTop},methods:{addbookmark:function(){var t=this;uni.showModal({title:"提示",content:"是否加入书签？",success:function(){var e=(0,r.default)(regeneratorRuntime.mark((function e(n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.confirm){e.next=5;break}return i={chapterid:t.detail.id,chapternum:t.detail.chapternum,chaptertitle:t.detail.chaptertitle,progress:t.progress,userid:uni.getStorageSync("appUserid")},e.next=4,t.$api.add("bookmarkshujixinxi",i);case 4:t.$utils.msg("添加成功");case 5:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()})},getAllZan:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.list("storeup",{page:1,type:21,tablename:"chaptershujixinxi",refid:this.id});case 2:e=t.sent,this.allZan=Number(e.data.total);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getLike:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.list("storeup",{page:1,limit:1,type:21,userid:uni.getStorageSync("appUserid"),refid:this.id,tablename:"chaptershujixinxi"});case 2:e=t.sent,e.data.list.length?(this.likeType=!0,this.likeForm=e.data.list[0]):this.likeType=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),likeClick:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,!this.likeType){t.next=5;break}uni.showModal({title:"提示",content:"是否取消点赞？",success:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.confirm){t.next=6;break}return t.next=3,e.$api.del("storeup",JSON.stringify([e.likeForm.id]));case 3:e.$utils.msg("取消成功"),e.getLike(),e.getAllZan();case 6:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()}),t.next=10;break;case 5:return t.next=7,e.$api.add("storeup",{userid:uni.getStorageSync("appUserid"),refid:this.id,type:21,name:this.detail.chaptertitle,picture:"1",tablename:"chaptershujixinxi",remark:this.refid});case 7:this.$utils.msg("点赞成功"),this.getLike(),this.getAllZan();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAllCollect:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.list("storeup",{page:1,type:1,tablename:"chaptershujixinxi",refid:this.id});case 2:e=t.sent,this.allCollect=Number(e.data.total);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getCollect:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.list("storeup",{page:1,limit:1,type:1,userid:uni.getStorageSync("appUserid"),refid:this.id,tablename:"chaptershujixinxi"});case 2:e=t.sent,e.data.list.length?(this.collectType=!0,this.collectForm=e.data.list[0]):this.collectType=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),collectClick:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this,!this.collectType){t.next=5;break}uni.showModal({title:"提示",content:"是否取消点赞？",success:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.confirm){t.next=6;break}return t.next=3,e.$api.del("storeup",JSON.stringify([e.collectForm.id]));case 3:e.$utils.msg("取消成功"),e.getCollect(),e.getAllCollect();case 6:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()}),t.next=10;break;case 5:return t.next=7,e.$api.add("storeup",{userid:uni.getStorageSync("appUserid"),refid:this.id,type:1,name:this.detail.chaptertitle,picture:"1",tablename:"chaptershujixinxi",remark:this.refid});case 7:this.$utils.msg("收藏成功"),this.getCollect(),this.getAllCollect();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),jiaClick:function(){this.fontSize++},jianClick:function(){this.fontSize--},blackClick:function(){"#fff"==this.background?(this.detail.content=this.detail.content.replace(/color:.*?(.*?).*?;/gi,""),this.background="#2a2a2a",this.color="#fff",uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000",animation:{duration:400,timingFunc:"easeIn"}})):(this.background="#fff",this.color="#000",uni.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff",animation:{duration:400,timingFunc:"easeIn"}}))},touchStart:function(t){1==t.touches.length&&(this.startX=t.touches[0].clientX)},touchEnd:function(t){if(1==t.changedTouches.length){var e=t.changedTouches[0].clientX,n=e-this.startX;Math.abs(n)>20&&(n>0?this.prepClick():this.nextClick())}},init:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,t.next=3,this.$api.info("chaptershujixinxi",this.id);case 3:return e=t.sent,this.detail=e.data,this.getLike(),this.getAllZan(),this.getCollect(),this.getAllCollect(),this.detail.content=this.detail.content.replace(/<img/g,'<img style="width: 100%;"'),t.next=12,this.$api.page("bookmarkshujixinxi",{chapterid:e.data.id,page:1,limit:1,sort:"addtime",order:"desc",userid:uni.getStorageSync("appUserid")});case 12:n=t.sent,n.data.list.length?uni.showModal({title:"提示",content:"是否跳转到书签位置？",success:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.confirm?uni.pageScrollTo({scrollTop:n.data.list[0].progress,duration:100}):uni.pageScrollTo({scrollTop:0,duration:100});case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}):uni.pageScrollTo({scrollTop:0,duration:100});case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getList:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.list("chaptershujixinxi",{refid:this.refid,limit:1e3});case 2:e=t.sent,this.list=e.data.list;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),prepClick:function(){for(var t in this.list)if(this.list[t].id==this.id){if(0==t)return this.$utils.msg("已经是第一章了"),!1;this.id=this.list[Number(t)-1].id,this.init();break}},backClick:function(){uni.navigateBack({})},nextClick:function(){for(var t in this.list)if(this.list[t].id==this.id){if(t==this.list.length-1)return this.$utils.msg("已经是最后一章了"),!1;this.id=this.list[Number(t)+1].id,this.init();break}}}};e.default=a},ea9e:function(t,e,n){"use strict";n.r(e);var i=n("2168"),r=n("6f25");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("3482");var o,s=n("f0c5"),c=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"a1bdf57a",null,!1,i["a"],o);e["default"]=c.exports}}]);